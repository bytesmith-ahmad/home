#!/bin/bash

# Define colors
RED='\033[0;31m'
GREEN='\033[0;32m'
NC='\033[0m' # No Color

# Function to check if folder exists and create directory
create_workspace_dir() {
    local uuid=$(task _get "$1.uuid")
    local workspace_dir="$HOME/workspace/$uuid"
    
    if [ -d "$workspace_dir" ]; then
        echo -e "${RED}Warning:${NC} Directory already exists at $workspace_dir"
        return 1
    fi
    
    mkdir -p "$workspace_dir"
    task modify "$1" dir:"$workspace_dir"

    echo -e "${GREEN}Success:${NC} Directory successfully created at $workspace_dir"
}

# Check if argument provided
if [ $# -ne 1 ]; then
    echo "Usage: $0 <task-id>"
    exit 1
fi

# Call function with task ID argument
create_workspace_dir "$1"
